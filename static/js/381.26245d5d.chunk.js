"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[381],{381:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var i=a(791),n=a(454),s=a(831),o=a(668),r=a(760),c=a(461),h=a(923),d=a(422),l=a(65),w=a(730),m=a(441),u=a(184);function p(){const e=(0,i.useRef)(),t=(0,n.F)(o.E,"/crystal_compressed.gltf",(e=>{const t=new w._;t.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/"),t.setDecoderConfig({type:"js"}),e.setDRACOLoader(t)})),{camera:a,size:s}=(0,n.A)(),c=(0,i.useCallback)((()=>{var t;const i=null===(t=e.current)||void 0===t?void 0:t.getObjectByName("crystal");if(i){const e=new r.Box3,t=new r.Vector3;e.setFromObject(i),e.getCenter(t);const n=e.getSize(new r.Vector3),s=Math.max(n.x,n.y,n.z),o=a.fov*(Math.PI/180),c=Math.max(Math.abs(s/2/Math.tan(o/2)),a.near+.01);a.near=.1,a.far=100,a.position.set(t.x,t.y,c)}}),[a]);return(0,i.useEffect)((()=>{var t;const a=null===(t=e.current)||void 0===t?void 0:t.getObjectByName("crystal");if(a){const t=new r.LOD,i=a.clone(),n=i.clone(),s=i.clone();i.scale.set(1,1,1),n.scale.set(1.2,1.2,1.2),s.scale.set(1.5,1.5,1.5),t.addLevel(i,0),t.addLevel(n,50),t.addLevel(s,100),e.current.add(t)}}),[e]),(0,n.C)((t=>{var a,i;let{mouse:n,clock:s}=t;c();const o=null===(a=e.current)||void 0===a?void 0:a.getObjectByName("crystal"),r=null===(i=e.current)||void 0===i?void 0:i.getObjectByName("foil");if(o&&(o.rotation.y+=.02*n.x,o.rotation.x-=.02*n.y,r)){const e=-Math.cos(s.elapsedTime*Math.PI/2);r.rotateY(e/200)}})),(0,i.useEffect)((()=>{const e=()=>{var e;const{innerWidth:t,innerHeight:i}=window;a.aspect=t/i,a.updateProjectionMatrix(),s.width=t,s.height=i;const n=null===(e=document.getElementById("splash-canvas"))||void 0===e?void 0:e.querySelector("canvas");n&&(n.style.width="".concat(t,"px"),n.style.height="".concat(i,"px"))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[a,s]),(0,i.useEffect)((()=>{e.current&&e.current.traverse((e=>{e.isMesh&&"Cylinder"===e.name&&(e.name="crystal",e.material=new r.MeshPhysicalMaterial({color:16716287,metalness:.9,roughness:.5,transmission:1,transparent:!0,opacity:.92,clearcoat:1,clearcoatRoughness:0,sheen:1,sheenRoughness:.9,sheenColor:new r.Color(3342387),specularIntensity:1,specularColor:new r.Color(11184810),ior:2.419,reflectivity:.7,iridescence:10,iridescenceIOR:1.5,iridescenceThicknessRange:[10,4e3],emissive:4456601,emissiveIntensity:4,flatShading:!1}),e.castShadow=!0,e.receiveShadow=!0,e.depthTest=!0,e.depthWrite=!0)}))}),[e]),(0,i.useEffect)((()=>{const t=new r.PlaneGeometry(100,100,128,128),i=new r.MeshPhysicalMaterial({color:170,metalness:1,roughness:.7,transmission:1,transparent:!0,opacity:1,clearcoat:0,clearcoatRoughness:0,sheen:1,sheenRoughness:0,specularIntensity:0,ior:1.5,reflectivity:0,iridescence:1,iridescenceIOR:1.4,iridescenceThicknessRange:[100,400],emissive:266,emissiveIntensity:400,flatShading:!1,side:r.BackSide}),n=new r.Mesh(t,i);n.material=i,n.position.set(0,0,-1);const s=new r.Vector3;a.getWorldDirection(s),n.lookAt(n.position.x+s.x,n.position.y+s.y,n.position.z+s.z),n.name="foil",n.castShadow=!0,n.receiveShadow=!0,n.ref=n,e.current.add(n)}),[e,a]),(0,u.jsx)("primitive",{object:t.scene,ref:e})}const g=(0,i.memo)((function(){let e=window.devicePixelRatio;const{ref:t,inView:a}=(0,m.YD)({trackVisibility:!0,delay:100}),[n,o]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight});(0,i.useEffect)((()=>{const e=()=>{o(w((e=>e)))};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]);const w=e=>{const t=document.getElementById("splash-canvas");if(t){const a=t.clientWidth||window.innerWidth,i=t.clientHeight||window.innerHeight,n=4,s={width:Math.ceil(a*n),height:Math.ceil(i*n)};return e(s),s}return{width:0,height:0}};return(0,u.jsx)("section",{id:"home",children:(0,u.jsx)("div",{className:"splash-container",children:(0,u.jsx)("div",{className:"splash-main-container",children:(0,u.jsx)("div",{className:"main-content",ref:t,children:(0,u.jsx)(i.Suspense,{fallback:null,children:(0,u.jsxs)(s.Xz,{id:"splash-canvas",frameloop:a?"always":"never",style:{height:"100vh",width:"100%"},antialias:"false",alpha:"true",colormanagement:"true",shadows:{enabled:!0,type:r.PCFSoftShadowMap,autoUpdate:!0},gammafactor:2.2,outputencoding:r.sRGBEncoding,children:[(0,u.jsx)("directionalLight",{position:[-2,1,2],intensity:10,color:[.4,.4,1],angle:Math.PI/2,penumbra:1,lookAt:[0,0,0],castShadow:"true","shadow-mapSize-height":n.height,"shadow-mapSize-width":n.width,"shadow-camera-near":.1,"shadow-camera-far":100}),(0,u.jsx)("directionalLight",{position:[1,-2,-1],intensity:10,color:[1,1,.4],angle:Math.PI/8,penumbra:1,lookAt:[0,0,0],castShadow:"true","shadow-mapSize-height":n.height,"shadow-mapSize-width":n.width,"shadow-camera-near":.1,"shadow-camera-far":100}),(0,u.jsx)("directionalLight",{position:[1,-1,1],intensity:5,color:[.4,1,1],angle:Math.PI/8,penumbra:1,castShadow:"true","shadow-mapSize-height":n.height,"shadow-mapSize-width":n.width,"shadow-camera-near":.1,"shadow-camera-far":100}),(0,u.jsx)("directionalLight",{position:[1,2,1],intensity:10,color:6750207,angle:Math.PI/8,penumbra:1,castShadow:"true","shadow-mapSize-height":n.height,"shadow-mapSize-width":n.width,"shadow-camera-near":.1,"shadow-camera-far":100}),(0,u.jsx)(p,{}),(0,u.jsxs)(c.x,{children:[(0,u.jsx)(h.y,{focusDistance:1,focalLength:6,bokehScale:20*e}),(0,u.jsx)(d.d,{luminanceThreshold:1,luminanceSmoothing:.1,intensity:.5}),(0,u.jsx)(l.k,{})]})]})})})})})})}))}}]);
//# sourceMappingURL=381.26245d5d.chunk.js.map