"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7039],{37039:function(e,a,i){i.d(a,{t0:function(){return r},ZP:function(){return E},Ob:function(){return I}});var n,r,t=i(96237),l=i(39324),s=i(71209),o=i(10064),d=i(64502),m=i(35250),c=i(17944),u=i(70079),f=i(1454),p=i(70671),h=i(32004),x=i(13205),g=i(62470),b=i(40558),v=i(19841),j=i(94968),C=i(10746),w=i(37394),N=i(15635),Z=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function k(e){return e.split(/[\s,]+/)}function M(e){var a=e.value,i=e.onChange,n=e.className,r=(0,p.Z)(),t=(0,o._)((0,u.useState)(""),2),l=t[0],s=t[1],c=(0,u.useCallback)(function(e){if(l)switch(e.key){case"Enter":case",":case" ":var n=k(l);i((0,d._)(a).concat((0,d._)(n.map(_)))),s(""),e.preventDefault()}},[l,i,a]);return(0,m.jsx)(C.ZP,{className:(0,v.default)("react-select-container",n),isMulti:!0,onBlur:function(e){if(l){var n=k(l);i((0,d._)(a).concat((0,d._)(n.map(_)))),s(l),e.preventDefault()}},classNamePrefix:"react-select",components:y,inputValue:l,isClearable:!0,menuIsOpen:!1,onChange:i,onInputChange:s,onKeyDown:c,placeholder:r.formatMessage(R.placeholder),value:a,"aria-labelledby":"add-emails-label",name:"add-member-emails"})}var _=function(e){return{label:e,value:e,isValid:Z.test(e)}},y={DropdownIndicator:function(){return null},IndicatorsContainer:function(){return null},ClearIndicator:function(){return null},MultiValueRemove:function(){return null},MultiValue:function(e){var a=(0,p.Z)(),i=(0,m.jsxs)("span",{className:"flex items-center gap-1",children:[(0,m.jsx)("span",{children:e.children}),(0,m.jsx)(f.q5L,{className:"icon-sm"})]}),n=e.data.isValid?i:(0,m.jsx)(N.u,{label:a.formatMessage(R.tooltipInvalidEmail,{email:e.data.value}),side:"top",children:i});return(0,m.jsx)(w.c.MultiValue,(0,s._)((0,l._)({},e),{children:(0,m.jsx)("button",{className:(0,v.default)("m-1 cursor-pointer rounded-full border border-transparent py-1 pl-3 pr-2 text-sm dark:text-gray-300",e.data.isValid?"bg-gray-50 hover:border-gray-300 hover:bg-gray-100 dark:bg-gray-800 dark:hover:border-gray-600 dark:hover:bg-gray-700":"bg-red-200 text-red-500 dark:text-red-500"),onClick:function(a){var i,n;null===(n=(i=e.removeProps).onClick)||void 0===n||n.call(i,a),a.preventDefault()},"aria-label":a.formatMessage(R.removeMember,{member:e.data.value}),children:n})}))}},R=(0,j.vU)({membersAdded:{id:"emailsTextarea.membersAdded",defaultMessage:"+{count} {count, plural, one {member} other {members}}",description:"Current number of members that will be added to the workspace"},removeMember:{id:"emailsTextarea.removeMember",defaultMessage:"Remove {member}",description:"Remove a member from the list of members to be added"},tooltipInvalidEmail:{id:"emailsTextarea.tooltipInvalidEmail",defaultMessage:'"{email}" may not be a valid email',description:"Tooltip for invalid email addresses"},clearAllEntries:{id:"emailsTextarea.clearAllEntries",defaultMessage:"Clear all",description:"Clear all entries in the list of members to be added"},placeholder:{id:"emailsTextarea.placeholder",defaultMessage:"Type an email and press enter...",description:"Placeholder for the insert emails textarea"}}),T=i(89319),V=i(72290),S=i(12296);function E(e){var a=e.workspace,i=e.step,n=e.onStepChange,v=e.emailTableRows,j=e.onEmailTableRowsChange,C=e.emailTextareaValue,w=e.onEmailTextareaValueChange,N=e.canResendInviteEmails,k=e.resendEmails,_=e.onResendEmailsChange,y=(0,S.Gk)(a.id),R=(0,o._)((0,u.useState)(!1),2),E=R[0],P=R[1],F=(0,o._)((0,u.useState)(!1),2),L=F[0],H=F[1],z=(0,u.useRef)(null),B=(0,c.ec)(c.F_.isTeamPlan),D=(0,p.Z)(),O=I(y),W=function(e,a,i){var n=(0,d._)(v);n[e]=(0,s._)((0,l._)({},n[e]),(0,t._)({},a,i)),j(n)},U=function(e){j((0,d._)(v.slice(0,e)).concat((0,d._)(v.slice(e+1))))};return(0,m.jsxs)(m.Fragment,{children:[i===r.INITIAL&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex flex-col text-left",children:[(0,m.jsx)("label",{className:"mb-1 text-left",htmlFor:"upload-csv",id:"upload-csv-label",children:(0,m.jsx)(h.Z,(0,l._)({},A.importCSVLabel))}),(0,m.jsxs)("span",{className:"text-sm text-gray-500",children:[(0,m.jsx)(h.Z,(0,s._)((0,l._)({},E?A.helperCSVFormatHide:A.helperCSVFormatShow),{values:{link:function(e){return(0,m.jsx)("button",{className:"underline",onClick:function(){P(!E)},children:e})}}})),E&&(0,m.jsx)("pre",{className:"mt-4",children:"email,role\nuser1@company.com,member\nadmin@company.com,admin\nit@company.com,owner"})]})]}),(0,m.jsx)("input",{ref:z,type:"file",accept:".csv,text/csv",id:"upload-csv",className:"hidden",onChange:function(e){var a,i=null===(a=e.target.files)||void 0===a?void 0:a[0];if(i){var t=function(e,a,i){if(e.size/1048576>25)return{status:"error"};if("text/csv"===e.type){var n=new FileReader;n.readAsText(e),n.onload=function(e){var n,r=i,t=(null===(n=e.target)||void 0===n?void 0:n.result).split("\n"),l=new Set;return{status:"success",newRows:t.reduce(function(e,i){var n,t=(0,o._)(i.split(",").map(function(e){return e.trim()}),2),s=t[0],d=t[1];return Z.test(s)&&!l.has(s)&&(void 0!==a[d]||r||(r=!0),e.push({email:s,role:null!==(n=a[d])&&void 0!==n?n:a.member})),l.add(s),e},[]),hasWarning:i}}}return{status:"error"}}(i,O,L);"success"===t.status?(j(t.newRows),n(r.CSV_TABLE),H(t.hasWarning)):V.m.danger(D.formatMessage(A.fileTooLargeWarning,{maxSize:"".concat(25,"MB")}),{duration:5})}}}),(0,m.jsx)("button",{className:"rounded bg-gray-100 px-4 py-2 dark:bg-gray-800",type:"button",onClick:function(){return z.current.click()},children:(0,m.jsx)(h.Z,(0,l._)({},A.importCSVButton))})]}),(0,m.jsx)("label",{className:"mb-2",htmlFor:"add-member-emails",id:"add-emails-label",children:(0,m.jsx)(h.Z,(0,l._)({},A.addEmailsFieldName))}),(0,m.jsx)(M,{value:C,onChange:w})]}),i===r.CSV_TABLE&&(0,m.jsxs)(m.Fragment,{children:[L&&(0,m.jsxs)("div",{className:"flex w-full items-center bg-yellow-100 p-4",children:[(0,m.jsx)(f.BJv,{className:"icon-sm mr-2 text-yellow-700"}),(0,m.jsx)("div",{className:"flex-grow text-yellow-700",children:(0,m.jsx)(h.Z,(0,l._)({},A.unspecifiedRoleDescription))})]}),(0,m.jsxs)(b.Z.Root,{size:"normal",children:[(0,m.jsxs)(b.Z.Header,{children:[(0,m.jsx)(b.Z.HeaderCell,{children:(0,m.jsx)(h.Z,(0,l._)({},A.inviteTableHeaderEmail))}),(0,m.jsx)(b.Z.HeaderCell,{className:"pl-3 dark:bg-gray-900",children:(0,m.jsx)(h.Z,(0,l._)({},A.inviteTableHeaderRole))}),(0,m.jsx)(b.Z.HeaderCell,{})]}),(0,m.jsx)(b.Z.Body,{children:v.map(function(e,a){return(0,m.jsxs)(b.Z.Row,{children:[(0,m.jsx)(b.Z.Cell,{children:(0,m.jsx)(T.Z,{name:"email",type:"email",value:e.email,onChange:function(e){return W(a,"email",e.target.value)},color:"neutral"})}),(0,m.jsx)(b.Z.Cell,{children:(0,m.jsxs)(g.Z.Root,{value:e.role,onValueChange:function(e){return W(a,"role",e)},children:[(0,m.jsxs)(g.Z.Trigger,{children:[(0,m.jsx)(g.Z.Value,{}),(0,m.jsx)(g.Z.Icon,{})]}),(0,m.jsx)(g.Z.Portal,{children:(0,m.jsxs)(g.Z.Content,{className:"border border-token-surface-secondary",children:[(0,m.jsx)(g.Z.Item,{value:O.member,children:(0,m.jsx)(h.Z,(0,l._)({},A.inviteRoleMember))}),O.admin&&(0,m.jsx)(g.Z.Item,{value:O.admin,children:(0,m.jsx)(h.Z,(0,l._)({},A.inviteRoleAdmin))}),O.owner&&(0,m.jsx)(g.Z.Item,{value:O.owner,children:(0,m.jsx)(h.Z,(0,l._)({},A.inviteRoleOwner))})]})})]})}),(0,m.jsx)(b.Z.Cell,{textAlign:"right",children:(0,m.jsx)(f.Ybf,{onClick:function(){return U(a)},className:"icon-sm mr-2 cursor-pointer text-token-text-secondary"})})]},a)})})]})]}),N&&_&&(0,m.jsx)("div",{className:"mt-2 flex items-center text-left text-token-text-secondary",children:(0,m.jsx)(x.Z,{id:"resend-emails",checked:k,onChange:function(e){return _(e.currentTarget.checked)},label:D.formatMessage(A.resendEmailsFieldName)})}),i===r.INITIAL&&B&&(0,m.jsx)("span",{className:"mt-4 text-token-text-primary",children:(0,m.jsx)(h.Z,(0,l._)({},A.teamInviteModalNote))})]})}(n=r||(r={}))[n.INITIAL=0]="INITIAL",n[n.CSV_TABLE=1]="CSV_TABLE";var I=function(e){var a={member:"member"};return e&&(a.admin="admin",a.owner="owner"),a},A={importCSVLabel:{id:"adminPage.importCSVLabel",defaultMessage:"Import from CSV",description:"Name of label for import from CSV button"},helperCSVFormatHide:{id:"adminPage.helperCSVFormat",defaultMessage:'The file must include email and an optional role on each line. Roles can be "member", "admin", or "owner". <link>Hide Example</link>',description:"Instructions for formatting the import CSV, with a link to hide the example"},helperCSVFormatShow:{id:"adminPage.helperCSVFormat",defaultMessage:'The file must include email and an optional role on each line. Roles can be "member", "admin", or "owner". <link>Show Example</link>',description:"Instructions for formatting the import CSV, with a link to show an example"},importCSVButton:{id:"adminPage.importCSVButton",defaultMessage:"Upload",description:"Name of upload from CSV button"},addEmailsFieldName:{id:"adminPage.addEmailsFieldName.0",defaultMessage:"Emails",description:"Name of input for adding emails to workspace"},unspecifiedRoleDescription:{id:"adminPage.unspecifiedRoleDescription",defaultMessage:"Roles that were unspecified have been changed to Member.",description:"Description text for defaulting invite roles to member"},inviteTableHeaderEmail:{id:"adminPage.inviteTableHeaderEmail",defaultMessage:"Email",description:"Label for email column of invite table header"},inviteTableHeaderRole:{id:"adminPage.inviteTableHeaderRole",defaultMessage:"Role",description:"Label for role column of invite table header"},inviteRoleMember:{id:"adminPage.inviteRoleMember",defaultMessage:"Member",description:"Member role for workspace invite"},inviteRoleAdmin:{id:"adminPage.inviteRoleAdmin",defaultMessage:"Admin",description:"Admin role for workspace invite"},inviteRoleOwner:{id:"adminPage.inviteRoleOwner",defaultMessage:"Owner",description:"Owner role for workspace invite"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}.",description:"Error when uploading a file that is too large"},resendEmailsFieldName:{id:"adminPage.resendEmailsFieldName",defaultMessage:"Resend emails for existing invites",description:"Name of checkbox input for resending emails to workspace"},teamInviteModalNote:{id:"adminPage.teamInviteModalNote",defaultMessage:"Note: Users that accept invites will be included as additional seats on your next invoice.",description:"Note for team plan invites that additional seats will be charged"}}}}]);